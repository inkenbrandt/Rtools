df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- spread(values,year,mean,drop=TRUE)
values <- filter(values,!is.na(time1),!is.na(time2))
View(values)
const <- "Sodium"
time1 <- 1980
time2 <- 1981
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
View(values)
const <- "Sodium"
time1 <- 2000
time2 <- 1981
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare == "year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else {
if (compare == "yr-mo") {
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
}
} else {
if (compare == "decade") {
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
}
}
const <- "Sodium"
time1 <- 2000
time2 <- 1981
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare == "year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else {
if (compare == "yr-mo") {
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else {
if (compare == "decade") {
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
}
}
}
View(values)
const <- "Sodium"
time1 <- 2000
time2 <- 1981
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)==1){
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)>=10){
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else {
print("Error")
}
View(values)
?abs
const <- "Sodium"
time1 <- 1980
time2 <- 1971
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)==1){
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)>=10){
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else {
print("Error")
}
const <- "Sodium"
time1 <- 1970
time2 <- 1980
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)==1){
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)>=10){
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else {
print("Error")
}
View(values)
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "decade"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)==1){
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)>=10){
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else {
print("Error")
}
View(values)
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = ((year-1900)-((year-1900)%%10)))
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)==1){
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (abs(time1-time2)>=10){
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else {
print("Error")
}
View(values)
?filter
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- functions(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (abs(time1-time2)==1 & compare=="year") {
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else if (compare == "monthly") {
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,month,mean,drop=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- functions(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare=="year"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else if (compare == "monthly"){
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,month,mean,drop=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- function(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare=="year"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else if (compare == "monthly"){
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = mean(ResultValue)))
values <- na.omit(spread(values,month,mean,drop=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
View(new_data)
?wilcoxsign_test
x <- c("gte","coin","dplyr","rkt","zoo","lubridate")
lapply(x, require, character.only=T)
install.packages("coin")
x <- c("gte","coin","dplyr","rkt","zoo","lubridate")
?wilcoxsign_test
??wilcoxsign_test
?wilcox.test
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x~y, zero.method = c (“Pratt”))
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x~y, zero.method = c(“Pratt”))
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x~y, zero.method = “Pratt”)
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x ~ y, zero.method = “Pratt”)
??wilcoxsign_test
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x ~ y,data=c(x,y) zero.method =“Pratt”)
x <- new_data$time1
y <- new_data$time2
res <- wilcoxsign_test(x ~ y,data=c(x,y), zero.method =“Pratt”)
x <- new_data$time1
y <- new_data$time2
df <- data.frame(x,y)
res <- wilcoxsign_test(x ~ y,data=df, zero.method =“Pratt”)
View(new_data)
x <- select(new_data, time1)
y <- select(new_data, time2)
df <- data.frame(x,y)
res <- wilcoxsign_test(x ~ y,data=df, zero.method =“Pratt”)
?spread
x <- select(new_data, time1)
?dim
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- function(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare=="year"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE))
} else if (compare == "monthly"){
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,month,mean,drop=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
lent <- dim(new_data)
print lent
print(lent)
lent <- dim(new_data)[2]
print(lent)
x <- select(new_data, lent-2)
y <- select(new_data, lent-1)
df <- data.frame(x,y)
res <- wilcoxsign_test(x ~ y,data=df, zero.method =“Pratt”)
x <- select(new_data, lent-2)
y <- select(new_data, lent-1)
df <- data.frame(x,y)
res <- wilcoxsign_test(x ~ y,data=df, zero.method ="Pratt")
x <- c("gte","coin","dplyr","rkt","zoo","lubridate")
lapply(x, require, character.only=T)
x <- select(new_data, lent-2)
y <- select(new_data, lent-1)
df <- data.frame(x,y)
res <- wilcoxsign_test(x ~ y,data=df, zero.method ="Pratt")
x <- select(new_data, lent-2)
y <- select(new_data, lent-1)
df <- data.frame(x,y)
res <- wilcoxsign_test(x~y, zero.method ="Pratt")
View(x)
x <- select(new_data, lent-1)
y <- select(new_data, lent)
df <- data.frame(x,y)
res <- wilcoxsign_test(x~y, zero.method ="Pratt")
View(x)
View(y)
?spread
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- function(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare=="year"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE,convert=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,drop=TRUE,convert=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,decade,mean,drop=TRUE,convert=TRUE))
} else if (compare == "monthly"){
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,month,mean,drop=TRUE,convert=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
lent <- dim(new_data)[2]
const <- "Sodium"
time1 <- 1972
time2 <- 1973
compare <- "year"
df <- mutate(data, month = month(as.Date(SampleDate, format = "%m/%d/%Y")), year = year(as.Date(SampleDate, format = "%m/%d/%Y")), decade = (((year-1900)-((year-1900)%%10))+1900))
pivdates <- function(const, time1, time2, compare){
df <- filter(df, Param==const, year>=time1, year<=time2)
df <- arrange(df, StationId, SampleDate)
if (compare=="year"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,convert=TRUE))
} else if (compare=="year-month"){
df <- filter(df, year==time1 | year==time2)
df <- group_by(df,StationId,month, year)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,year,mean,convert=TRUE))
} else if (compare =="decade"){
df <- filter(df, decade==time1 | decade==time2)
df <- group_by(df,StationId,decade)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,decade,mean,convert=TRUE))
} else if (compare == "monthly"){
df <- filter(df, month==time1 | month==time2)
df <- group_by(df,StationId,month)
values <- unique(summarise(df, mean = median(ResultValue)))
values <- na.omit(spread(values,month,mean,convert=TRUE))
} else{
values = "none"
}
return(values)
}
new_data <- pivdates(const, time1=1971, time2=1975, compare="year")
lent <- dim(new_data)[2]
x <- select(new_data, lent-1)
y <- select(new_data, lent)
x <- as.factor(x)
y <- as.factor(y)
df <- data.frame(x,y)
res <- wilcoxsign_test(x~y, zero.method ="Pratt")
View(x)
class(x)
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
x <- as.factor(x)
y <- as.factor(y)
df <- data.frame(x,y)
res <- wilcoxsign_test(x~y, zero.method ="Pratt")
class(x)
class(x[1])
?data.frame
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x,y)
res <- wilcoxsign_test(x~y, df, zero.method ="Pratt")
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x,y)
View(df)
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x=x,y=y)
View(df)
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x=x,y=y)
View(df)
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x=X+Time1,y=X+Time2)
res <- wilcoxsign_test(x~y, df, zero.method ="Pratt")
x <- c(select(new_data, lent-1))
y <- c(select(new_data, lent))
df <- data.frame(x='X'+Time1,y='X'+Time2)
df <- data.frame(x='X'+time1,y='X'+time2)
df <- select(new_data,paste('X',time1),paste('X',time2))
lent <- dim(new_data)[2]
df <- select(new_data,lent-1,lent)
View(df)
df <- select(new_data,x = lent-1,y = lent)
View(df)
res <- wilcoxsign_test(x~y, df, zero.method ="Pratt")
print res
print(res)
View(new_data)
?gte
?Surv
